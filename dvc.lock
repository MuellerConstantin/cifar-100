schema: '2.0'
stages:
  fetch_data:
    cmd: fetch_data -v -o data/raw
    outs:
    - path: data/raw/test
      hash: md5
      md5: 4b23ca093e5e16053f7dd7b35fa040d4.dir
      size: 31370078
      nfiles: 3
    - path: data/raw/train
      hash: md5
      md5: 804d817dde8ee77d327f23e7e2da939d.dir
      size: 156850081
      nfiles: 3
  split:
    cmd: split -v -i data/raw/train -t data/splitted/train -e data/splitted/validation
    deps:
    - path: data/raw/train
      hash: md5
      md5: 804d817dde8ee77d327f23e7e2da939d.dir
      size: 156850081
      nfiles: 3
    params:
      params.yaml:
        general.seed: 42
        general.validation_split_ratio: 0.2
    outs:
    - path: data/splitted/train
      hash: md5
      md5: 37c77b41c3911fc24c0f8ce652fcfdac.dir
      size: 125480081
      nfiles: 3
    - path: data/splitted/validation
      hash: md5
      md5: 00e02e358e29588799d462ac59f67512.dir
      size: 31370080
      nfiles: 3
  train_cnn:
    cmd: train_cnn -v -t data/preprocessed/train/cnn -e data/preprocessed/validation/cnn
      -o models
    deps:
    - path: data/preprocessed/train/cnn
      hash: md5
      md5: f29f4b5a71c3b800611f997b4307c7a3.dir
      size: 494120081
      nfiles: 3
    - path: data/preprocessed/validation/cnn
      hash: md5
      md5: 8d20db777349b99562652eef5355483f.dir
      size: 123530080
      nfiles: 3
    params:
      params.yaml:
        general.batch_size: 32
        train_cnn.epochs: 200
        train_cnn.learning_rate: 0.0005
    outs:
    - path: dvclive/cnn/training
      hash: md5
      md5: aa097915384f9f03bcf487984e6b2ad9.dir
      size: 6504
      nfiles: 5
    - path: models/cnn_history.npy
      hash: md5
      md5: ffc156f7a26b1ca410b82cffb7d70db1
      size: 3627
    - path: models/cnn_model.keras
      hash: md5
      md5: 17baff139da3992a25bfe3ac24f5e820
      size: 17093669
  evaluate_cnn:
    cmd: evaluate_cnn -v -m models/cnn_model.keras -t data/preprocessed/train/cnn
      -e data/preprocessed/test/cnn
    deps:
    - path: data/preprocessed/test/cnn
      hash: md5
      md5: 1640d12a37ea928fd839c2a2811e9256.dir
      size: 123530080
      nfiles: 3
    - path: data/preprocessed/train/cnn
      hash: md5
      md5: f29f4b5a71c3b800611f997b4307c7a3.dir
      size: 494120081
      nfiles: 3
    - path: models/cnn_model.keras
      hash: md5
      md5: 17baff139da3992a25bfe3ac24f5e820
      size: 17093669
    params:
      params.yaml:
        general.batch_size: 32
    outs:
    - path: dvclive/cnn/evaluation
      hash: md5
      md5: 65447f1c07fa51326111b1593519443e.dir
      size: 194
      nfiles: 3
  preprocess_cnn_train:
    cmd: preprocess_cnn -v -i data/splitted/train -o data/preprocessed/train/cnn
    deps:
    - path: data/splitted/train
      hash: md5
      md5: 37c77b41c3911fc24c0f8ce652fcfdac.dir
      size: 125480081
      nfiles: 3
    outs:
    - path: data/preprocessed/train/cnn
      hash: md5
      md5: f29f4b5a71c3b800611f997b4307c7a3.dir
      size: 494120081
      nfiles: 3
  preprocess_cnn_test:
    cmd: preprocess_cnn -v -i data/raw/test -o data/preprocessed/test/cnn
    deps:
    - path: data/raw/test
      hash: md5
      md5: 4b23ca093e5e16053f7dd7b35fa040d4.dir
      size: 31370078
      nfiles: 3
    outs:
    - path: data/preprocessed/test/cnn
      hash: md5
      md5: 1640d12a37ea928fd839c2a2811e9256.dir
      size: 123530080
      nfiles: 3
  preprocess_cnn_validation:
    cmd: preprocess_cnn -v -i data/splitted/validation -o data/preprocessed/validation/cnn
    deps:
    - path: data/splitted/validation
      hash: md5
      md5: 00e02e358e29588799d462ac59f67512.dir
      size: 31370080
      nfiles: 3
    outs:
    - path: data/preprocessed/validation/cnn
      hash: md5
      md5: 8d20db777349b99562652eef5355483f.dir
      size: 123530080
      nfiles: 3
  preprocess_resnet50_train:
    cmd: preprocess_resnet50 -v -i data/splitted/train -o data/preprocessed/train/resnet50
    deps:
    - path: data/splitted/train
      hash: md5
      md5: 37c77b41c3911fc24c0f8ce652fcfdac.dir
      size: 125480081
      nfiles: 3
    outs:
    - path: data/preprocessed/train/resnet50
      hash: md5
      md5: e16c0480c7d8902f771d9eaf66f88a67.dir
      size: 494120081
      nfiles: 3
  preprocess_resnet50_test:
    cmd: preprocess_resnet50 -v -i data/raw/test -o data/preprocessed/test/resnet50
    deps:
    - path: data/raw/test
      hash: md5
      md5: 4b23ca093e5e16053f7dd7b35fa040d4.dir
      size: 31370078
      nfiles: 3
    outs:
    - path: data/preprocessed/test/resnet50
      hash: md5
      md5: 8661f25e2eedfe5565d4454a63c78d86.dir
      size: 123530079
      nfiles: 3
  preprocess_resnet50_validation:
    cmd: preprocess_resnet50 -v -i data/splitted/validation -o data/preprocessed/validation/resnet50
    deps:
    - path: data/splitted/validation
      hash: md5
      md5: 00e02e358e29588799d462ac59f67512.dir
      size: 31370080
      nfiles: 3
    outs:
    - path: data/preprocessed/validation/resnet50
      hash: md5
      md5: a049ca24198f3c066570543db670fe79.dir
      size: 123530080
      nfiles: 3
  train_resnet50:
    cmd: train_resnet50 -v -t data/preprocessed/train/resnet50 -e data/preprocessed/validation/resnet50
      -o models
    deps:
    - path: data/preprocessed/train/resnet50
      hash: md5
      md5: e16c0480c7d8902f771d9eaf66f88a67.dir
      size: 494120081
      nfiles: 3
    - path: data/preprocessed/validation/resnet50
      hash: md5
      md5: a049ca24198f3c066570543db670fe79.dir
      size: 123530080
      nfiles: 3
    params:
      params.yaml:
        general.batch_size: 32
        train_resnet50.epochs: 200
        train_resnet50.fine_tuning_learning_rate: 1e-05
        train_resnet50.fine_tuning_unfreezed_layer_count: 10
    outs:
    - path: dvclive/resnet50/training
      hash: md5
      md5: f628add870e52fcb5c1ead8b3641caff.dir
      size: 18215
      nfiles: 10
    - path: models/resnet50_history.npy
      hash: md5
      md5: a55d3ff8deee4bf300ff097edc4c31fb
      size: 542
    - path: models/resnet50_model.keras
      hash: md5
      md5: 894c9d7f05a06215cad2db6c7bdb674a
      size: 114486543
  evaluate_resnet50:
    cmd: evaluate_resnet50 -v -m models/resnet50_model.keras -t data/preprocessed/train/resnet50
      -e data/preprocessed/test/resnet50
    deps:
    - path: data/preprocessed/test/resnet50
      hash: md5
      md5: 8661f25e2eedfe5565d4454a63c78d86.dir
      size: 123530079
      nfiles: 3
    - path: data/preprocessed/train/resnet50
      hash: md5
      md5: e16c0480c7d8902f771d9eaf66f88a67.dir
      size: 494120081
      nfiles: 3
    - path: models/resnet50_model.keras
      hash: md5
      md5: 894c9d7f05a06215cad2db6c7bdb674a
      size: 114486543
    params:
      params.yaml:
        general.batch_size: 32
    outs:
    - path: dvclive/resnet50/evaluation
      hash: md5
      md5: 2d13c83121d69b517d007cc5613356ba.dir
      size: 196
      nfiles: 3
