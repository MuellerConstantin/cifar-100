schema: '2.0'
stages:
  fetch_data:
    cmd: fetch_data -v -o data/raw
    outs:
    - path: data/raw/test
      hash: md5
      md5: b1162132f4ffebe1f492bf90048a2a6e.dir
      size: 31370078
      nfiles: 3
    - path: data/raw/train
      hash: md5
      md5: e17db322e296fbafcf3911b55c1a601b.dir
      size: 156850079
      nfiles: 3
  split:
    cmd: split -v -i data/raw/train -t data/splitted/train -e data/splitted/validation
    deps:
    - path: data/raw/train
      hash: md5
      md5: e17db322e296fbafcf3911b55c1a601b.dir
      size: 156850079
      nfiles: 3
    params:
      params.yaml:
        general.validation_split_ratio: 0.2
    outs:
    - path: data/splitted/train
      hash: md5
      md5: 5ab46e99601e1ed4ac88ddd8293f6b4e.dir
      size: 125480081
      nfiles: 3
    - path: data/splitted/validation
      hash: md5
      md5: 351109d20e5bc268fbf4bcd77439f81a.dir
      size: 31370079
      nfiles: 3
  train_cnn:
    cmd: train_cnn -v -t data/splitted/train -e data/splitted/validation -o models
    deps:
    - path: data/splitted/train
      hash: md5
      md5: 5ab46e99601e1ed4ac88ddd8293f6b4e.dir
      size: 125480081
      nfiles: 3
    - path: data/splitted/validation
      hash: md5
      md5: 351109d20e5bc268fbf4bcd77439f81a.dir
      size: 31370079
      nfiles: 3
    params:
      params.yaml:
        general.batch_size: 32
        train_cnn.epochs: 5
    outs:
    - path: dvclive/cnn/training
      hash: md5
      md5: dcf0cebefc5e41d862e6e598f6b8407d.dir
      size: 718
      nfiles: 5
    - path: models/cnn_history.npy
      hash: md5
      md5: 2fe8cfdced1c43f3c7263342836d59aa
      size: 542
    - path: models/cnn_model.keras
      hash: md5
      md5: 62670a284dadbfb7484712cea89bd9e6
      size: 24164189
  evaluate_cnn:
    cmd: evaluate_cnn -v -m models/cnn_model.keras -t data/splitted/train -e data/raw/test
    deps:
    - path: data/raw/test
      hash: md5
      md5: b1162132f4ffebe1f492bf90048a2a6e.dir
      size: 31370078
      nfiles: 3
    - path: data/splitted/train
      hash: md5
      md5: 5ab46e99601e1ed4ac88ddd8293f6b4e.dir
      size: 125480081
      nfiles: 3
    - path: models/cnn_model.keras
      hash: md5
      md5: 62670a284dadbfb7484712cea89bd9e6
      size: 24164189
    params:
      params.yaml:
        general.batch_size: 32
    outs:
    - path: dvclive/cnn/evaluation
      hash: md5
      md5: 45d0e9f3dfc5063b1bddfbe570612ed1.dir
      size: 210
      nfiles: 3
