schema: '2.0'
stages:
  fetch_data:
    cmd: fetch_data -v -o data/raw
    outs:
    - path: data/raw/test
      hash: md5
      md5: 4b23ca093e5e16053f7dd7b35fa040d4.dir
      size: 31370078
      nfiles: 3
    - path: data/raw/train
      hash: md5
      md5: 804d817dde8ee77d327f23e7e2da939d.dir
      size: 156850081
      nfiles: 3
  split:
    cmd: split -v -i data/raw/train -t data/splitted/train -e data/splitted/validation
    deps:
    - path: data/raw/train
      hash: md5
      md5: 804d817dde8ee77d327f23e7e2da939d.dir
      size: 156850081
      nfiles: 3
    params:
      params.yaml:
        general.validation_split_ratio: 0.2
    outs:
    - path: data/splitted/train
      hash: md5
      md5: 2646d230dcd007e5b4f669a1269364d6.dir
      size: 125480081
      nfiles: 3
    - path: data/splitted/validation
      hash: md5
      md5: 3918c3ae590f5570dfde888e6db8696b.dir
      size: 31370079
      nfiles: 3
  train_cnn:
    cmd: train_cnn -v -t data/preprocessed/train/cnn -e data/preprocessed/validation/cnn
      -o models
    deps:
    - path: data/preprocessed/train/cnn
      hash: md5
      md5: 951fdf27583db4cf9d0a9ee98d35fa22.dir
      size: 494120079
      nfiles: 3
    - path: data/preprocessed/validation/cnn
      hash: md5
      md5: be3917a7b33ad329399348e064ad8801.dir
      size: 123530080
      nfiles: 3
    params:
      params.yaml:
        general.batch_size: 32
        train_cnn.epochs: 5
    outs:
    - path: dvclive/cnn/training
      hash: md5
      md5: ecd740cdc05a3eb3ddeefc84083a1408.dir
      size: 717
      nfiles: 5
    - path: models/cnn_history.npy
      hash: md5
      md5: caa6cd6de7cafcf6f5f9c3407688a249
      size: 542
    - path: models/cnn_model.keras
      hash: md5
      md5: 8dab01a37f5707d508aec690660f9dd6
      size: 24161684
  evaluate_cnn:
    cmd: evaluate_cnn -v -m models/cnn_model.keras -t data/preprocessed/train/cnn
      -e data/preprocessed/test/cnn
    deps:
    - path: data/preprocessed/test/cnn
      hash: md5
      md5: 35f1c2d69df7e4f8547d2ebc1a13c1d6.dir
      size: 123530080
      nfiles: 3
    - path: data/preprocessed/train/cnn
      hash: md5
      md5: b145449590566203c58401e002582a86.dir
      size: 494120080
      nfiles: 3
    - path: models/cnn_model.keras
      hash: md5
      md5: 08b52ea92373f1e0ddfe9940c501ca32
      size: 24161684
    params:
      params.yaml:
        general.batch_size: 32
    outs:
    - path: dvclive/cnn/evaluation
      hash: md5
      md5: 06f0835bf2d193fcb7fee5f234054b24.dir
      size: 210
      nfiles: 3
  preprocess_cnn_train:
    cmd: preprocess_cnn -v -i data/splitted/train -o data/preprocessed/train/cnn
    deps:
    - path: data/splitted/train
      hash: md5
      md5: 2646d230dcd007e5b4f669a1269364d6.dir
      size: 125480081
      nfiles: 3
    outs:
    - path: data/preprocessed/train/cnn
      hash: md5
      md5: 951fdf27583db4cf9d0a9ee98d35fa22.dir
      size: 494120079
      nfiles: 3
  preprocess_cnn_test:
    cmd: preprocess_cnn -v -i data/raw/test -o data/preprocessed/test/cnn
    deps:
    - path: data/raw/test
      hash: md5
      md5: b1162132f4ffebe1f492bf90048a2a6e.dir
      size: 31370078
      nfiles: 3
    outs:
    - path: data/preprocessed/test/cnn
      hash: md5
      md5: 35f1c2d69df7e4f8547d2ebc1a13c1d6.dir
      size: 123530080
      nfiles: 3
  preprocess_cnn_validation:
    cmd: preprocess_cnn -v -i data/splitted/validation -o data/preprocessed/validation/cnn
    deps:
    - path: data/splitted/validation
      hash: md5
      md5: 3918c3ae590f5570dfde888e6db8696b.dir
      size: 31370079
      nfiles: 3
    outs:
    - path: data/preprocessed/validation/cnn
      hash: md5
      md5: be3917a7b33ad329399348e064ad8801.dir
      size: 123530080
      nfiles: 3
